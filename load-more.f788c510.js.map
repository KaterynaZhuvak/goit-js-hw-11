{"mappings":"iiBAAA,I,EAAAA,EAAAC,EAAA,S,uCAIMC,EADOC,SAASC,cAAc,QACjBC,SAASC,YACtBC,EAAOJ,SAASC,cAAc,YAC9BI,EAASL,SAASC,cAAc,cAChCK,EAAUN,SAASC,cAAc,cACnCM,EAAc,E,SAQHC,EAAiBC,G,OAAjBC,EAAgBC,MAAAC,KAAAC,U,UAAhBH,I,OAAAA,EAAfI,EAAAjB,EAAA,CAAAiB,EAAAC,GAAAC,MAAA,SAAAC,EAAgCR,G,IAEtBS,EACFC,E,4FADmB,EAAAC,EAAAC,UAASZ,EAAOF,G,OAAjCW,EAAQI,EAAAC,KACVJ,EAAgC,GAAdZ,EACtBH,EAAKoB,mBAAmB,cAAc,EAAAC,EAAAC,cAAaR,EAASS,OACxDT,EAASU,UAAYT,IACvBb,EAAQuB,UAAUC,IAAI,mBACtBC,QAAQC,IAAI,+D,gDAGdD,QAAQE,MAAMA,O,0DAVatB,MAAAC,KAAAC,U,UAchBqB,I,OAAAA,EAAfpB,EAAAjB,EAAA,CAAAiB,EAAAC,GAAAC,MAAA,SAAAC,I,IACQkB,EAEFhB,EAEID,E,yEAJFiB,EAAepC,EAAMqC,MAEvBjB,EAAgC,IADpCZ,GAAe,G,mBAGU,EAAAa,EAAAC,UAASc,EAAc5B,G,OAAxCW,EAAQI,EAAAC,KACdnB,EAAKoB,mBAAmB,aAAa,EAAAC,EAAAC,cAAaR,EAASS,OACvDT,EAASU,UAAYT,IACvBb,EAAQuB,UAAUC,IAAI,mBACtBC,QAAQC,IAAI,+D,kDAGdD,QAAQE,MAAMA,O,2DAZGtB,MAAAC,KAAAC,U,CAgBrBR,EAAOgC,iBAAiB,S,EAASvB,EAAAjB,EAAA,CAAAiB,EAAAC,GAAAC,MAAA,SAAAC,EAAMqB,G,IAG/BC,E,qEAFND,EAAME,iBACNlC,EAAQuB,UAAUY,OAAO,mBACnBF,EAAqCnC,EAtChBsC,iBAAiB,eAE5BC,OAAS,EAqCL,KAAhB5C,EAAMqC,MAAY,C,wCACbL,QAAQC,IAAI,gC,OAGjBO,GACFnC,EAAKwC,UAAY,GAEjBpC,EADqBT,EAAMqC,QAI3B5B,EADqBT,EAAMqC,O,oDAbQE,G,kCAkBvChC,EAAQ+B,iBAAiB,S,kBAlCVH,EAAMvB,MAAAC,KAAAC,U","sources":["src/js/load_more.js"],"sourcesContent":["import { getPhoto } from './api';\nimport { createMarkup } from './markup';\n\nconst form = document.querySelector('form');\nconst input = form.elements.searchQuery;\nconst list = document.querySelector('.gallery');\nconst button = document.querySelector('.submitBtn');\nconst loadBtn = document.querySelector('.load-more');\nlet currentPage = 1;\n\nfunction arePicturesPresent(container) {\n  const pictures = container.querySelectorAll('.photo-card');\n\n  return pictures.length > 0;\n}\n\nasync function getGeneralMarkup(input) {\n  try {\n    const pictures = await getPhoto(input, currentPage);\n    let valueOfPictures = currentPage * 40;\n    list.insertAdjacentHTML('afterbegin', createMarkup(pictures.hits));\n    if (pictures.totalHits < valueOfPictures) {\n      loadBtn.classList.add('visually-hidden');\n      console.log(\"We're sorry, but you've reached the end of search results.\");\n    }\n  } catch {\n    console.error(error);\n  }\n}\n\nasync function onLoad() {\n  const currentInput = input.value;\n  currentPage += 1;\n  let valueOfPictures = currentPage * 40;\n  try {\n    const pictures = await getPhoto(currentInput, currentPage);\n    list.insertAdjacentHTML('beforeend', createMarkup(pictures.hits));\n    if (pictures.totalHits < valueOfPictures) {\n      loadBtn.classList.add('visually-hidden');\n      console.log(\"We're sorry, but you've reached the end of search results.\");\n    }\n  } catch {\n    console.error(error);\n  }\n}\n\nbutton.addEventListener('click', async event => {\n  event.preventDefault();\n  loadBtn.classList.remove('visually-hidden');\n  const picturesPresent = arePicturesPresent(list);\n  if (input.value === '') {\n    return console.log('please put down correct tag');\n  }\n\n  if (picturesPresent) {\n    list.innerHTML = '';\n    const currentInput = input.value;\n    getGeneralMarkup(currentInput);\n  } else {\n    const currentInput = input.value;\n    getGeneralMarkup(currentInput);\n  }\n});\n\nloadBtn.addEventListener('click', onLoad);\n"],"names":["$bpxeT","parcelRequire","$8255347ea5c7df62$var$input","document","querySelector","elements","searchQuery","$8255347ea5c7df62$var$list","$8255347ea5c7df62$var$button","$8255347ea5c7df62$var$loadBtn","$8255347ea5c7df62$var$currentPage","$8255347ea5c7df62$var$getGeneralMarkup","input1","$8255347ea5c7df62$var$_getGeneralMarkup","apply","this","arguments","$parcel$interopDefault","$2TvXO","mark","_callee","pictures","valueOfPictures","$b7ONl","getPhoto","_ctx","sent","insertAdjacentHTML","$1KhuP","createMarkup","hits","totalHits","classList","add","console","log","error","$8255347ea5c7df62$var$_onLoad","currentInput","value","addEventListener","event","picturesPresent","preventDefault","remove","querySelectorAll","length","innerHTML"],"version":3,"file":"load-more.f788c510.js.map"}