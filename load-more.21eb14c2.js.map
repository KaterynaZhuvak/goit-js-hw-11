{"mappings":"iiBAAA,IAAAA,EAAAC,EAAA,S,iEAOMC,EADOC,SAASC,cAAc,QACjBC,SAASC,YACtBC,EAAOJ,SAASC,cAAc,YAC9BI,EAASL,SAASC,cAAc,cAChCK,EAAUN,SAASC,cAAc,cACnCM,EAAc,EAElB,SAASC,IACP,IAAQC,EAAuBT,SAC9BC,cAAc,YACdS,kBAAkBC,wBAFXC,OAIVC,OAAOC,SAAS,CACdC,IAAkB,EAAbN,EACLO,SAAU,U,UAUGC,EAAiBC,G,OAAjBC,EAAgBC,MAAAC,KAAAC,U,UAAhBH,I,OAAAA,EAAfI,EAAA1B,EAAA,CAAA0B,EAAAC,GAAAC,MAAA,SAAAC,EAAgCR,G,IAEtBS,EAEFC,E,4FAFmB,EAAAC,EAAAC,UAASZ,EAAOX,G,OAAjCoB,EAAQI,EAAAC,KACdT,EAAAU,GAASC,OAAOC,QAAQ,oBAAoDC,OAAhCT,EAASU,UAAU,eAAmBD,OAANlB,EAAM,MAC9EU,EAAgC,GAAdrB,EACtBH,EAAKkC,mBAAmB,cAAc,EAAAC,EAAAC,cAAab,EAASc,OAC5DjC,IACImB,EAASU,UAAYT,IACvBtB,EAAQoC,UAAUC,IAAI,mBACtBpB,EAAAU,GAASC,OAAOU,KAAK,iBAAoCR,OAAnBT,EAASU,UAAU,e,kDAG3D/B,EAAQoC,UAAUC,IAAI,mBACtBpB,EAAAU,GAASC,OAAOW,QAAQ,gC,2DAbGzB,MAAAC,KAAAC,U,UAkBhBwB,I,OAAAA,EAAfvB,EAAA1B,EAAA,CAAA0B,EAAAC,GAAAC,MAAA,SAAAC,I,IACQqB,EAEFnB,EAEID,E,yEAJFoB,EAAehD,EAAMiD,MAEvBpB,EAAgC,IADpCrB,GAAe,G,mBAGU,EAAAsB,EAAAC,UAASiB,EAAcxC,G,aAAxCoB,EAAQI,EAAAC,MACDK,UAAYT,GAAe,C,uBACtCtB,EAAQoC,UAAUC,IAAI,mB,kBACfpB,EAAAU,GAASC,OAAOU,KAAK,+D,QAE9BxC,EAAKkC,mBAAmB,aAAa,EAAAC,EAAAC,cAAab,EAASc,OAC3DQ,EAASC,UACT1C,I,kDAEAF,EAAQoC,UAAUC,IAAI,mBACtBpB,EAAAU,GAASC,OAAOW,QAAQ,gC,2DAfPzB,MAAAC,KAAAC,U,CAmBrBjB,EAAO8C,iBAAiB,SAAS,SAAAC,GAC/B,GAAoB,KAAhBrD,EAAMiD,MAER,OADA1C,EAAQoC,UAAUC,IAAI,mBACfpB,EAAAU,GAASC,OAAOmB,QAAQ,+BAEjCD,EAAME,iBACN,IAAMC,EAAqCnD,EAhDhBoD,iBAAiB,eAE5BC,OAAS,GA+CzBnD,EAAQoC,UAAUgB,OAAO,mBAGrBH,IACFnD,EAAKuD,UAAY,GAEjB1C,EADqBlB,EAAMiD,QAI3B/B,EADqBlB,EAAMiD,M,IAK/B1C,EAAQ6C,iBAAiB,S,kBAvCVL,EAAM1B,MAAAC,KAAAC,U,IAyCrB,IAAM2B,EAAW,IAAI1B,EAAAqC,GAAJ,CAAmB,gBAAiB,CACnDC,eAAgB,IAChBC,gBAAiB,SACjBC,aAAc,O","sources":["src/js/load_more.js"],"sourcesContent":["import { getPhoto } from './api';\nimport { createMarkup } from './markup';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport Notiflix from 'notiflix';\n\nconst form = document.querySelector('form');\nconst input = form.elements.searchQuery;\nconst list = document.querySelector('.gallery');\nconst button = document.querySelector('.submitBtn');\nconst loadBtn = document.querySelector('.load-more');\nlet currentPage = 1;\n\nfunction smoothScrol() {\n  const { height: cardHeight } = document\n  .querySelector(\".gallery\")\n  .firstElementChild.getBoundingClientRect();\n\nwindow.scrollBy({\n  top: cardHeight * 2,\n  behavior: \"smooth\",\n});\n}\n\nfunction arePicturesPresent(container) {\n  const pictures = container.querySelectorAll('.photo-card');\n\n  return pictures.length > 0;\n}\n\nasync function getGeneralMarkup(input) {\n  try {\n    const pictures = await getPhoto(input, currentPage);\n    Notiflix.Notify.success(`Hooray! We found ${pictures.totalHits} images of ${input}!`)\n    let valueOfPictures = currentPage * 40;\n    list.insertAdjacentHTML('afterbegin', createMarkup(pictures.hits));\n    smoothScrol();\n    if (pictures.totalHits < valueOfPictures) {\n      loadBtn.classList.add('visually-hidden');\n      Notiflix.Notify.info(`We found only ${pictures.totalHits} pictures`);\n    }\n  } catch (error) {\n    loadBtn.classList.add('visually-hidden');\n    Notiflix.Notify.failure('Sorry, something went wrong!');\n    \n  }\n}\n\nasync function onLoad() {\n  const currentInput = input.value;\n  currentPage += 1;\n  let valueOfPictures = currentPage * 40;\n  try {\n    const pictures = await getPhoto(currentInput, currentPage);\n    if (pictures.totalHits < valueOfPictures) {\n      loadBtn.classList.add('visually-hidden');\n      return Notiflix.Notify.info(\"We're sorry, but you've reached the end of search results.\");\n    }\n    list.insertAdjacentHTML('beforeend', createMarkup(pictures.hits));\n    lightbox.refresh();\n    smoothScrol();\n  } catch (error) {\n    loadBtn.classList.add('visually-hidden');\n    Notiflix.Notify.failure('Sorry, something went wrong!');\n  }\n}\n\nbutton.addEventListener('click', event => {\n  if (input.value === '') {\n    loadBtn.classList.add('visually-hidden')\n    return Notiflix.Notify.warning('Please put down correct tag');\n  }\n  event.preventDefault();\n  const picturesPresent = arePicturesPresent(list);\n  loadBtn.classList.remove('visually-hidden');\n  \n\n  if (picturesPresent) {\n    list.innerHTML = '';\n    const currentInput = input.value;\n    getGeneralMarkup(currentInput);\n  } else {\n    const currentInput = input.value;\n    getGeneralMarkup(currentInput);\n  }\n});\n\nloadBtn.addEventListener('click', onLoad);\n\nconst lightbox = new SimpleLightbox('.photo-card a', {\n  animationSpeed: 250,\n  captionPosition: 'bottom',\n  captionsData: 'alt',\n});"],"names":["$bpxeT","parcelRequire","$8255347ea5c7df62$var$input","document","querySelector","elements","searchQuery","$8255347ea5c7df62$var$list","$8255347ea5c7df62$var$button","$8255347ea5c7df62$var$loadBtn","$8255347ea5c7df62$var$currentPage","$8255347ea5c7df62$var$smoothScrol","cardHeight","firstElementChild","getBoundingClientRect","height","window","scrollBy","top","behavior","$8255347ea5c7df62$var$getGeneralMarkup","input1","$8255347ea5c7df62$var$_getGeneralMarkup","apply","this","arguments","$parcel$interopDefault","$2TvXO","mark","_callee","pictures","valueOfPictures","$b7ONl","getPhoto","_ctx","sent","$6JpON","Notify","success","concat","totalHits","insertAdjacentHTML","$1KhuP","createMarkup","hits","classList","add","info","failure","$8255347ea5c7df62$var$_onLoad","currentInput","value","$8255347ea5c7df62$var$lightbox","refresh","addEventListener","event","warning","preventDefault","picturesPresent","querySelectorAll","length","remove","innerHTML","$5IjG7","animationSpeed","captionPosition","captionsData"],"version":3,"file":"load-more.21eb14c2.js.map"}