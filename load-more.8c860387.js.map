{"mappings":"iiBAAA,IAAAA,EAAAC,EAAA,S,iEAMMC,EAAOC,SAASC,cAAc,QAC9BC,EAAQH,EAAKI,SAASC,YACtBC,EAAOL,SAASC,cAAc,YAC9BK,EAAUN,SAASC,cAAc,cACnCM,EAAc,EAEZC,EAAW,IAAIC,EAAAC,GAAJ,CAAmB,gBAAiB,CACnDC,eAAgB,IAChBC,aAAc,QAGhB,SAASC,IACP,IAAQC,EAAuBd,SAC5BC,cAAc,YACdc,kBAAkBC,wBAFbC,OAIRC,OAAOC,SAAS,CACdC,IAAkB,EAAbN,EACLO,SAAU,U,CAoBd,SAASC,EAAqBC,GAC5B,IAAMC,EAAqCnB,EAhBhBoB,iBAAiB,eAC5BC,OAAS,EAgBzB,GAAc,KAAVH,GAAgBA,EAAMI,SAAS,KACjC,OAAOlB,EAAAmB,GAASC,OAAOC,QACrB,mDAGyBN,GAhB3BnB,EAAK0B,UAAY,GAEjBC,EADqB9B,EAAM+B,QAI3BD,EADqB9B,EAAM+B,M,UAgBhBD,EAAiBE,G,OAAjBC,EAAgBC,MAAAC,KAAAC,U,UAAhBH,I,OAAAA,EAAf1B,EAAAZ,EAAA,CAAAY,EAAA8B,GAAAC,MAAA,SAAAC,EAAgCP,G,IAGtBQ,EACFC,E,kFAFJpC,EAAc,E,UACS,EAAAqC,EAAAC,UAASX,EAAO3B,G,OAAjCmC,EAAQI,EAAAC,KACVJ,EAAgC,GAAdpC,EACtBE,EAAAmB,GAASC,OAAOmB,QACd,oBAAoDC,OAAhCP,EAASQ,UAAU,eAAmBD,OAANf,EAAM,MAE5D7B,EAAK8C,mBAAmB,cAAc,EAAAC,EAAAC,cAAaX,EAASY,OAC5D9C,EAAS+C,UACTjD,EAAQkD,UAAUC,OAAO,mBACzB5C,IAEI6B,EAASQ,UAAYP,GACvBrC,EAAQkD,UAAUE,IAAI,mB,kDAGxBpD,EAAQkD,UAAUE,IAAI,mBACtBjD,EAAAmB,GAASC,OAAO8B,QAAQ,gC,2DAlBGvB,MAAAC,KAAAC,U,UAsBhBsB,I,OAAAA,EAAfnD,EAAAZ,EAAA,CAAAY,EAAA8B,GAAAC,MAAA,SAAAC,I,IACQoB,EAEFlB,EAEID,E,yEAJFmB,EAAe3D,EAAM+B,MAEvBU,EAAgC,IADpCpC,GAAe,G,mBAGU,EAAAqC,EAAAC,UAASgB,EAActD,G,aAAxCmC,EAAQI,EAAAC,MACDG,UAAYP,GAAe,C,uBACtCrC,EAAQkD,UAAUE,IAAI,mB,kBACfjD,EAAAmB,GAASC,OAAOiC,KACrB,+D,QAGJzD,EAAK8C,mBAAmB,aAAa,EAAAC,EAAAC,cAAaX,EAASY,OAC3D9C,EAAS+C,UACT1C,I,kDAEAP,EAAQkD,UAAUE,IAAI,mBACtBjD,EAAAmB,GAASC,OAAO8B,QAAQ,gC,2DAjBPvB,MAAAC,KAAAC,U,CAqBrBvC,EAAKgE,iBAAiB,UAAU,SAAAC,GAC9BA,EAAMC,iBACN3C,EAAqBpB,EAAM+B,M,IAG7B3B,EAAQyD,iBAAiB,S,kBA1BVH,EAAMxB,MAAAC,KAAAC,U","sources":["src/js/load_more.js"],"sourcesContent":["import { getPhoto } from './api';\nimport { createMarkup } from './markup';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport Notiflix from 'notiflix';\n\nconst form = document.querySelector('form');\nconst input = form.elements.searchQuery;\nconst list = document.querySelector('.gallery');\nconst loadBtn = document.querySelector('.load-more');\nlet currentPage = 1;\n\nconst lightbox = new SimpleLightbox('.photo-card a', {\n  animationSpeed: 250,\n  captionsData: 'alt'\n});\n\nfunction smoothScrol() {\n  const { height: cardHeight } = document\n    .querySelector('.gallery')\n    .firstElementChild.getBoundingClientRect();\n\n  window.scrollBy({\n    top: cardHeight * 2,\n    behavior: 'smooth',\n  });\n}\n\nfunction arePicturesPresent(container) {\n  const pictures = container.querySelectorAll('.photo-card');\n  return pictures.length > 0;\n}\n\nfunction buildMarkupAndCheckGallery(value) {\n  if (value) {\n    list.innerHTML = '';\n    const currentInput = input.value;\n    getGeneralMarkup(currentInput);\n  } else {\n    const currentInput = input.value;\n    getGeneralMarkup(currentInput);\n  }\n}\n\nfunction checkMarkupForSpaces(input) {\n  const picturesPresent = arePicturesPresent(list);\n  if (input === '' || input.includes(' ')) {\n    return Notiflix.Notify.warning(\n      'Please put down correct tag or eliminate spaces'\n    );\n  } else {\n    buildMarkupAndCheckGallery(picturesPresent);\n  }\n}\n\nasync function getGeneralMarkup(input) {\n  try {\n    currentPage = 1;\n    const pictures = await getPhoto(input, currentPage);\n    let valueOfPictures = currentPage * 40;\n    Notiflix.Notify.success(\n      `Hooray! We found ${pictures.totalHits} images of ${input}!`\n    );\n    list.insertAdjacentHTML('afterbegin', createMarkup(pictures.hits));\n    lightbox.refresh();\n    loadBtn.classList.remove('visually-hidden');\n    smoothScrol();\n\n    if (pictures.totalHits < valueOfPictures) {\n      loadBtn.classList.add('visually-hidden');\n    }\n  } catch (error) {\n    loadBtn.classList.add('visually-hidden');\n    Notiflix.Notify.failure('Sorry, something went wrong!');\n  }\n}\n\nasync function onLoad() {\n  const currentInput = input.value;\n  currentPage += 1;\n  let valueOfPictures = currentPage * 40;\n  try {\n    const pictures = await getPhoto(currentInput, currentPage);\n    if (pictures.totalHits < valueOfPictures) {\n      loadBtn.classList.add('visually-hidden');\n      return Notiflix.Notify.info(\n        \"We're sorry, but you've reached the end of search results.\"\n      );\n    }\n    list.insertAdjacentHTML('beforeend', createMarkup(pictures.hits));\n    lightbox.refresh();\n    smoothScrol();\n  } catch (error) {\n    loadBtn.classList.add('visually-hidden');\n    Notiflix.Notify.failure('Sorry, something went wrong!');\n  }\n}\n\nform.addEventListener('submit', event => {\n  event.preventDefault();\n  checkMarkupForSpaces(input.value);\n});\n\nloadBtn.addEventListener('click', onLoad);\n"],"names":["$bpxeT","parcelRequire","$8255347ea5c7df62$var$form","document","querySelector","$8255347ea5c7df62$var$input","elements","searchQuery","$8255347ea5c7df62$var$list","$8255347ea5c7df62$var$loadBtn","$8255347ea5c7df62$var$currentPage","$8255347ea5c7df62$var$lightbox","$parcel$interopDefault","$5IjG7","animationSpeed","captionsData","$8255347ea5c7df62$var$smoothScrol","cardHeight","firstElementChild","getBoundingClientRect","height","window","scrollBy","top","behavior","$8255347ea5c7df62$var$checkMarkupForSpaces","input1","picturesPresent","querySelectorAll","length","includes","$6JpON","Notify","warning","innerHTML","$8255347ea5c7df62$var$getGeneralMarkup","value","input2","$8255347ea5c7df62$var$_getGeneralMarkup","apply","this","arguments","$2TvXO","mark","_callee","pictures","valueOfPictures","$b7ONl","getPhoto","_ctx","sent","success","concat","totalHits","insertAdjacentHTML","$1KhuP","createMarkup","hits","refresh","classList","remove","add","failure","$8255347ea5c7df62$var$_onLoad","currentInput","info","addEventListener","event","preventDefault"],"version":3,"file":"load-more.8c860387.js.map"}