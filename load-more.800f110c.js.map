{"mappings":"oeAAA,IAAAA,EAAAC,EAAA,S,aAGA,MACMC,EADOC,SAASC,cAAc,QACjBC,SAASC,YACtBC,EAAOJ,SAASC,cAAc,YAC9BI,EAASL,SAASC,cAAc,cAChCK,EAAUN,SAASC,cAAc,cACvC,IAAIM,EAAc,EAQlBC,eAAeC,EAAiBC,GAC9B,IACE,MAAMC,QAAiB,EAAAd,EAAAe,UAASF,EAAOH,GACvC,IAAIM,EAAgC,GAAdN,EACtBH,EAAKU,mBAAmB,cAAc,EAAAC,EAAAC,cAAaL,EAASM,OACxDN,EAASO,UAAYL,IACvBP,EAAQa,UAAUC,IAAI,mBACtBC,QAAQC,IAAI,8D,CAEd,MACAD,QAAQE,MAAMA,M,EAoBlBlB,EAAOmB,iBAAiB,SAAShB,MAAMiB,IACrCA,EAAMC,iBACNpB,EAAQa,UAAUQ,OAAO,mBACzB,MAAMC,EAAqCxB,EAtChByB,iBAAiB,eAE5BC,OAAS,EAqCzB,GAAoB,KAAhB/B,EAAMgC,MACR,OAAOV,QAAQC,IAAI,+BAGrB,GAAIM,EAAiB,CACnBxB,EAAK4B,UAAY,GAEjBvB,EADqBV,EAAMgC,M,KAEtB,CAELtB,EADqBV,EAAMgC,M,KAK/BzB,EAAQkB,iBAAiB,SAlCzBhB,iBACE,MAAMyB,EAAelC,EAAMgC,MAC3BxB,GAAe,EACf,IAAIM,EAAgC,GAAdN,EACtB,IACE,MAAMI,QAAiB,EAAAd,EAAAe,UAASqB,EAAc1B,GAC9CH,EAAKU,mBAAmB,aAAa,EAAAC,EAAAC,cAAaL,EAASM,OACvDN,EAASO,UAAYL,IACvBP,EAAQa,UAAUC,IAAI,mBACtBC,QAAQC,IAAI,8D,CAEd,MACAD,QAAQE,MAAMA,M","sources":["src/js/load_more.js"],"sourcesContent":["import { getPhoto } from './api';\nimport { createMarkup } from './markup';\n\nconst form = document.querySelector('form');\nconst input = form.elements.searchQuery;\nconst list = document.querySelector('.gallery');\nconst button = document.querySelector('.submitBtn');\nconst loadBtn = document.querySelector('.load-more');\nlet currentPage = 1;\n\nfunction arePicturesPresent(container) {\n  const pictures = container.querySelectorAll('.photo-card');\n\n  return pictures.length > 0;\n}\n\nasync function getGeneralMarkup(input) {\n  try {\n    const pictures = await getPhoto(input, currentPage);\n    let valueOfPictures = currentPage * 40;\n    list.insertAdjacentHTML('afterbegin', createMarkup(pictures.hits));\n    if (pictures.totalHits < valueOfPictures) {\n      loadBtn.classList.add('visually-hidden');\n      console.log(\"We're sorry, but you've reached the end of search results.\");\n    }\n  } catch {\n    console.error(error);\n  }\n}\n\nasync function onLoad() {\n  const currentInput = input.value;\n  currentPage += 1;\n  let valueOfPictures = currentPage * 40;\n  try {\n    const pictures = await getPhoto(currentInput, currentPage);\n    list.insertAdjacentHTML('beforeend', createMarkup(pictures.hits));\n    if (pictures.totalHits < valueOfPictures) {\n      loadBtn.classList.add('visually-hidden');\n      console.log(\"We're sorry, but you've reached the end of search results.\");\n    }\n  } catch {\n    console.error(error);\n  }\n}\n\nbutton.addEventListener('click', async event => {\n  event.preventDefault();\n  loadBtn.classList.remove('visually-hidden');\n  const picturesPresent = arePicturesPresent(list);\n  if (input.value === '') {\n    return console.log('please put down correct tag');\n  }\n\n  if (picturesPresent) {\n    list.innerHTML = '';\n    const currentInput = input.value;\n    getGeneralMarkup(currentInput);\n  } else {\n    const currentInput = input.value;\n    getGeneralMarkup(currentInput);\n  }\n});\n\nloadBtn.addEventListener('click', onLoad);\n"],"names":["$7rYDH","parcelRequire","$40e894cac32bd2b5$var$input","document","querySelector","elements","searchQuery","$40e894cac32bd2b5$var$list","$40e894cac32bd2b5$var$button","$40e894cac32bd2b5$var$loadBtn","$40e894cac32bd2b5$var$currentPage","async","$40e894cac32bd2b5$var$getGeneralMarkup","input1","pictures","getPhoto","valueOfPictures","insertAdjacentHTML","$3huUq","createMarkup","hits","totalHits","classList","add","console","log","error","addEventListener","event","preventDefault","remove","picturesPresent","querySelectorAll","length","value","innerHTML","currentInput"],"version":3,"file":"load-more.800f110c.js.map"}