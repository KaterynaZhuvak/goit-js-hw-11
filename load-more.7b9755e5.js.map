{"mappings":"qhBAAA,IAAAA,EAAAC,EAAA,S,uCAMA,MAAMC,EAAOC,SAASC,cAAc,QAC9BC,EAAQH,EAAKI,SAASC,YACtBC,EAAOL,SAASC,cAAc,YAC9BK,EAAUN,SAASC,cAAc,cACvC,IAAIM,EAAc,EAElB,MAAMC,EAAW,IAAIC,EAAAC,GAAJ,CAAmB,gBAAiB,CACnDC,eAAgB,IAChBC,aAAc,QA8BhB,SAASC,EAAqBC,GAC5B,MAAMC,EAAqCV,EAhBhBW,iBAAiB,eAC5BC,OAAS,EAgBzB,GAAc,KAAVH,GAAgBA,EAAMI,SAAS,KAEjC,OADAb,EAAKc,UAAY,GACVV,EAAAW,GAASC,OAAOC,QACrB,mDAGyBP,GAjB3BV,EAAKc,UAAY,GAEjBI,EADqBrB,EAAMsB,QAI3BD,EADqBrB,EAAMsB,M,CAiB/BC,eAAeF,EAAiBG,GAC9B,IACEnB,EAAc,EACd,MAAMoB,QAAiB,EAAA9B,EAAA+B,UAASF,EAAOnB,GACvC,IAAIsB,EAAgC,GAAdtB,EACtBE,EAAAW,GAASC,OAAOS,QACd,oBAAoBH,EAASI,uBAAuBL,MAEtDrB,EAAK2B,mBAAmB,cAAc,EAAAC,EAAAC,cAAaP,EAASQ,OAC5D3B,EAAS4B,UACT9B,EAAQ+B,UAAUC,OAAO,mBACrBX,EAASI,UAAYF,GACvBvB,EAAQ+B,UAAUE,IAAI,kB,CAExB,MAAOC,GACPlC,EAAQ+B,UAAUE,IAAI,mBACtB9B,EAAAW,GAASC,OAAOoB,QAAQ,+B,EAyB5B1C,EAAK2C,iBAAiB,UAAUC,IAC9BA,EAAMC,iBACN/B,EAAqBX,EAAMsB,MAAM,IAGnClB,EAAQoC,iBAAiB,SA1BzBjB,iBACE,MAAMoB,EAAe3C,EAAMsB,MAC3BjB,GAAe,EACf,IAAIsB,EAAgC,GAAdtB,EACtB,IACE,MAAMoB,QAAiB,EAAA9B,EAAA+B,UAASiB,EAActC,GAI9C,GAHAF,EAAK2B,mBAAmB,aAAa,EAAAC,EAAAC,cAAaP,EAASQ,OAC3D3B,EAAS4B,UAlEb,WACE,MAAQU,OAAQC,GAAe/C,SAC5BC,cAAc,YACd+C,kBAAkBC,wBAErBC,OAAOC,SAAS,CACdC,IAAkB,EAAbL,EACLM,SAAU,U,CA4DVC,GACIzB,EAAkBF,EAASI,UAAY,GAEzC,OADAzB,EAAQ+B,UAAUE,IAAI,mBACf9B,EAAAW,GAASC,OAAOkC,KACrB,6D,CAGJ,MAAOf,GACPlC,EAAQ+B,UAAUE,IAAI,mBACtB9B,EAAAW,GAASC,OAAOoB,QAAQ,+B","sources":["src/js/load_more.js"],"sourcesContent":["import { getPhoto } from './api';\nimport { createMarkup } from './markup';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport Notiflix from 'notiflix';\n\nconst form = document.querySelector('form');\nconst input = form.elements.searchQuery;\nconst list = document.querySelector('.gallery');\nconst loadBtn = document.querySelector('.load-more');\nlet currentPage = 1;\n\nconst lightbox = new SimpleLightbox('.photo-card a', {\n  animationSpeed: 250,\n  captionsData: 'alt',\n});\n\nfunction smoothScrol() {\n  const { height: cardHeight } = document\n    .querySelector('.gallery')\n    .firstElementChild.getBoundingClientRect();\n\n  window.scrollBy({\n    top: cardHeight * 2,\n    behavior: 'smooth',\n  });\n}\n\nfunction arePicturesPresent(container) {\n  const pictures = container.querySelectorAll('.photo-card');\n  return pictures.length > 0;\n}\n\nfunction buildMarkupAndCheckGallery(value) {\n  if (value) {\n    list.innerHTML = '';\n    const currentInput = input.value;\n    getGeneralMarkup(currentInput);\n  } else {\n    const currentInput = input.value;\n    getGeneralMarkup(currentInput);\n  }\n}\n\nfunction checkMarkupForSpaces(input) {\n  const picturesPresent = arePicturesPresent(list);\n  if (input === '' || input.includes(' ')) {\n    list.innerHTML = '';\n    return Notiflix.Notify.warning(\n      'Please put down correct tag or eliminate spaces'\n    );\n  } else {\n    buildMarkupAndCheckGallery(picturesPresent);\n  }\n}\n\nasync function getGeneralMarkup(input) {\n  try {\n    currentPage = 1;\n    const pictures = await getPhoto(input, currentPage);\n    let valueOfPictures = currentPage * 40;\n    Notiflix.Notify.success(\n      `Hooray! We found ${pictures.totalHits} images of ${input}!`\n    );\n    list.insertAdjacentHTML('afterbegin', createMarkup(pictures.hits));\n    lightbox.refresh();\n    loadBtn.classList.remove('visually-hidden');\n    if (pictures.totalHits < valueOfPictures) {\n      loadBtn.classList.add('visually-hidden');\n    }\n  } catch (error) {\n    loadBtn.classList.add('visually-hidden');\n    Notiflix.Notify.failure('Sorry, something went wrong!');\n  }\n}\n\nasync function onLoad() {\n  const currentInput = input.value;\n  currentPage += 1;\n  let valueOfPictures = currentPage * 40;\n  try {\n    const pictures = await getPhoto(currentInput, currentPage);\n    list.insertAdjacentHTML('beforeend', createMarkup(pictures.hits));\n    lightbox.refresh();\n    smoothScrol();\n    if (valueOfPictures % pictures.totalHits < 40) {\n      loadBtn.classList.add('visually-hidden');\n      return Notiflix.Notify.info(\n        \"We're sorry, but you've reached the end of search results.\"\n      );\n    }\n  } catch (error) {\n    loadBtn.classList.add('visually-hidden');\n    Notiflix.Notify.failure('Sorry, something went wrong!');\n  }\n}\n\nform.addEventListener('submit', event => {\n  event.preventDefault();\n  checkMarkupForSpaces(input.value);\n});\n\nloadBtn.addEventListener('click', onLoad);\n"],"names":["$7rYDH","parcelRequire","$40e894cac32bd2b5$var$form","document","querySelector","$40e894cac32bd2b5$var$input","elements","searchQuery","$40e894cac32bd2b5$var$list","$40e894cac32bd2b5$var$loadBtn","$40e894cac32bd2b5$var$currentPage","$40e894cac32bd2b5$var$lightbox","$parcel$interopDefault","$fZKcF","animationSpeed","captionsData","$40e894cac32bd2b5$var$checkMarkupForSpaces","input1","picturesPresent","querySelectorAll","length","includes","innerHTML","$7Y9D8","Notify","warning","$40e894cac32bd2b5$var$getGeneralMarkup","value","async","input2","pictures","getPhoto","valueOfPictures","success","totalHits","insertAdjacentHTML","$3huUq","createMarkup","hits","refresh","classList","remove","add","error","failure","addEventListener","event","preventDefault","currentInput","height","cardHeight","firstElementChild","getBoundingClientRect","window","scrollBy","top","behavior","$40e894cac32bd2b5$var$smoothScrol","info"],"version":3,"file":"load-more.7b9755e5.js.map"}